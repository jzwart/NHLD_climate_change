target_default: 6_plot

packages:
  - ggplot2
  - grid

include:
  - lib.yml

file_extensions:
  - feather
  - ind

sources:
  - 6_plot/src/fig_delta.R
  - 6_plot/src/fig_boxplot_theme.R

targets:

  2_analysis:
    depends:
      - 2_analysis/out/doc.rds
      - 2_analysis/out/stage.rds
      - 2_analysis/out/pco2.rds
      - 2_analysis/out/emit_areal.rds
      - 2_analysis/out/emit.rds
      - 2_analysis/out/area.rds
      - 2_analysis/out/fhee.rds
      - 2_analysis/out/bury.rds
      - 2_analysis/out/bury_areal.rds

  2_analysis/out/doc.rds:
    command: gd_get('2_analysis/out/doc.rds.ind', config_file='lib/cfg/gd_config.yml')
  2_analysis/out/stage.rds:
    command: gd_get('2_analysis/out/stage.rds.ind', config_file='lib/cfg/gd_config.yml')
  2_analysis/out/pco2.rds:
    command: gd_get('2_analysis/out/pco2.rds.ind', config_file='lib/cfg/gd_config.yml')
  2_analysis/out/emit_areal.rds:
    command: gd_get('2_analysis/out/emit_areal.rds.ind', config_file='lib/cfg/gd_config.yml')
  2_analysis/out/emit.rds:
    command: gd_get('2_analysis/out/emit.rds.ind', config_file='lib/cfg/gd_config.yml')
  2_analysis/out/area.rds:
    command: gd_get('2_analysis/out/area.rds.ind', config_file='lib/cfg/gd_config.yml')
  2_analysis/out/fhee.rds:
    command: gd_get('2_analysis/out/fhee.rds.ind', config_file='lib/cfg/gd_config.yml')
  2_analysis/out/bury.rds:
    command: gd_get('2_analysis/out/bury.rds.ind', config_file='lib/cfg/gd_config.yml')
  2_analysis/out/bury_areal.rds:
    command: gd_get('2_analysis/out/bury_areal.rds.ind', config_file='lib/cfg/gd_config.yml')

  6_plot:
    depends:
      - 6_plot/out/fig_doc_delta.png.ind
      - 6_plot/out/fig_stage_delta.png.ind
      - 6_plot/out/fig_pco2_delta.png.ind
      - 6_plot/out/fig_emit_areal.png.ind
      - 6_plot/out/fig_emit.png.ind
      - 6_plot/out/fig_area.png.ind
      - 6_plot/out/fig_fhee.png.ind
      - 6_plot/out/fig_bury.png.ind
      - 6_plot/out/fig_bury_areal.png.ind

  6_plot/out/fig_doc_delta.png.ind:
    command: fig_delta(
      fig_ind = target_name,
      var_cfg_file = '2_analysis/cfg/doc.yml',
      fig_cfg_yml = '6_plot/cfg/fig_config.yml',
      var_lookup_yml = '6_plot/cfg/var_lookup.yml',
      remake_file = I('6_plot.yml'),
      gd_config = 'lib/cfg/gd_config.yml')

  6_plot/out/fig_stage_delta.png.ind:
    command: fig_delta(
      fig_ind = target_name,
      var_cfg_file = '2_analysis/cfg/stage.yml',
      fig_cfg_yml = '6_plot/cfg/fig_config.yml',
      var_lookup_yml = '6_plot/cfg/var_lookup.yml',
      remake_file = I('6_plot.yml'),
      gd_config = 'lib/cfg/gd_config.yml')

  6_plot/out/fig_pco2_delta.png.ind:
    command: fig_delta(
      fig_ind = target_name,
      var_cfg_file = '2_analysis/cfg/pco2.yml',
      fig_cfg_yml = '6_plot/cfg/fig_config.yml',
      var_lookup_yml = '6_plot/cfg/var_lookup.yml',
      remake_file = I('6_plot.yml'),
      gd_config = 'lib/cfg/gd_config.yml')

  6_plot/out/fig_emit_areal.png.ind:
    command: fig_delta(
      fig_ind = target_name,
      var_cfg_file = '2_analysis/cfg/emit_areal.yml',
      fig_cfg_yml = '6_plot/cfg/fig_config.yml',
      var_lookup_yml = '6_plot/cfg/var_lookup.yml',
      remake_file = I('6_plot.yml'),
      gd_config = 'lib/cfg/gd_config.yml')

  6_plot/out/fig_emit.png.ind:
    command: fig_delta(
      fig_ind = target_name,
      var_cfg_file = '2_analysis/cfg/emit.yml',
      fig_cfg_yml = '6_plot/cfg/fig_config.yml',
      var_lookup_yml = '6_plot/cfg/var_lookup.yml',
      remake_file = I('6_plot.yml'),
      gd_config = 'lib/cfg/gd_config.yml')

  6_plot/out/fig_area.png.ind:
    command: fig_delta(
      fig_ind = target_name,
      var_cfg_file = '2_analysis/cfg/area.yml',
      fig_cfg_yml = '6_plot/cfg/fig_config.yml',
      var_lookup_yml = '6_plot/cfg/var_lookup.yml',
      remake_file = I('6_plot.yml'),
      gd_config = 'lib/cfg/gd_config.yml')

  6_plot/out/fig_fhee.png.ind:
    command: fig_delta(
      fig_ind = target_name,
      var_cfg_file = '2_analysis/cfg/fhee.yml',
      fig_cfg_yml = '6_plot/cfg/fig_config.yml',
      var_lookup_yml = '6_plot/cfg/var_lookup.yml',
      remake_file = I('6_plot.yml'),
      gd_config = 'lib/cfg/gd_config.yml')

  6_plot/out/fig_bury.png.ind:
    command: fig_delta(
      fig_ind = target_name,
      var_cfg_file = '2_analysis/cfg/bury.yml',
      fig_cfg_yml = '6_plot/cfg/fig_config.yml',
      var_lookup_yml = '6_plot/cfg/var_lookup.yml',
      remake_file = I('6_plot.yml'),
      gd_config = 'lib/cfg/gd_config.yml')

  6_plot/out/fig_bury_areal.png.ind:
    command: fig_delta(
      fig_ind = target_name,
      var_cfg_file = '2_analysis/cfg/bury_areal.yml',
      fig_cfg_yml = '6_plot/cfg/fig_config.yml',
      var_lookup_yml = '6_plot/cfg/var_lookup.yml',
      remake_file = I('6_plot.yml'),
      gd_config = 'lib/cfg/gd_config.yml')

